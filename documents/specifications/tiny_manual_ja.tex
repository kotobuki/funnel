%http://tex.dante.jp/typo/index.php?Listings
\documentclass[9pt]{jsarticle}
\usepackage{listings, jlisting, color}
\usepackage[dvipdfm]{graphicx}
\usepackage{mediabb}

\lstset{
basicstyle={\small\ttfamily},
columns=[l]{fullflexible},
frame={single},
tabsize={4},
lineskip={-2pt}
}

\def\lstlistingname{リスト}

\begin{document}

\begin{center}
{\LARGE Funnel簡易マニュアル}
\end{center}

%\maketitle

\section{動作環境}
\begin{itemize}
\item OS
	\begin{itemize}
	\item Windows XP SP2
	\item Windows Vista
	\item Mac OS X Tiger 10.4
	\item Mac OS X Leopard 10.5
	\end{itemize}
\item ソフトウェア
	\begin{itemize}
	\item Java実行環境（1.4.2以上）
	\item Flash Professional CS3\footnote{http://www.adobe.com/jp/products/flash/}・Flex Builder 2\footnote{http://www.adobe.com/jp/products/flex/}・Flex 2 SDK\footnote{http://www.adobe.com/jp/products/flex/sdk/}
	\item Processing（0135 BETA以上）\footnote{http://processing.org/download/index.html}
	\item Ruby（1.8.6以上）\footnote{http://www.ruby-lang.org/ja/downloads/}＋OSCライブラリ\footnote{http://raa.ruby-lang.org/project/osc/}
	\end{itemize}
\item ハードウェア
	\begin{itemize}
	\item Gainer I/Oモジュール v1.0\footnote{http://www.triggerdevice.com/items/}またはv1.3\footnote{http://www.sparkfun.com/commerce/product\_info.php?products\_id=8480}
	\item Arduino USB/NG/Diecimila\footnote{http://www.sparkfun.com/commerce/product\_info.php?products\_id=666}
	\item XBee Series 1 (XBS1)\footnote{http://www.digi-intl.co.jp/maxstream/products/XBeeZigBeeModule.html}
	\item Funnel I/O 4$\times$4\footnote{Funnelの配布パッケージの一部として回路図及び基板レイアウトデータを公開}
	\end{itemize}
\end{itemize}

\section{配布パッケージのディレクトリ構成}
\begin{itemize}
\item \texttt{documents/}：仕様書など
\item \texttt{hardware/}：ハードウェア及びファームウェア
\item \texttt{libraries/}：各ソフトウェアライブラリ
	\begin{itemize}
	\item \texttt{actionscript3/}：AS3用ライブラリ・サンプル・ソースコード
	\item \texttt{processing/}：Processing用ライブラリ・サンプル・ソースコード
	\item \texttt{ruby/}：Ruby用ライブラリ・サンプル・ソースコード
	\end{itemize}
\item \texttt{LICENSE.txt}：ライセンス条項
\item \texttt{README\_en.txt}：概要説明（英語版）
\item \texttt{README\_ja.txt}：概要説明（日本語版）
\item \texttt{server/}：Funnel Server
	\begin{itemize}
	\item \texttt{funnel\_server.jar}：Funnel Server本体
	\item \texttt{settings.yaml}：Funnel Serverの設定ファイル
	\end{itemize}
\item \texttt{sketchbook/}：その他のファイル
	\begin{itemize}
	\item \texttt{xbee\_*.pro}：ベース用（base）とリモート用（remote）XBeeの設定ファイル（X-CTU\footnote{http://ftp1.digi.com/support/utilities/setup\_xctu\_5100.exe}用）
	\end{itemize}
\end{itemize}

\section{Funnel Serverの設定と起動}
\subsection{設定}
使用するハードウェアに合わせてFunnel Serverの設定ファイルを変更して下さい。Funnel Serverでは2つのネットワークポートを利用し、デフォルト値は9000番と9001番です。他のアプリケーションがこれらのポートを使用している場合には、他の番号に変更して下さい。comポートを指定しない場合には、自動検出を試みます。
\begin{lstlisting}[caption={settings.yamlの設定例},label=useless]
server:
  command port: 9000
  notification port: 9001

io:
  type: Gainer
  com: 
\end{lstlisting}

\subsection{起動}
設定が終わったら、\texttt{funnel\_server.jar}をダブルクリックしてFunnel Serverを起動してください。正常に起動した場合には次のような画面が表示されます。何らかのエラーメッセージが表示される場合には、メッセージを参考に設定ファイルやハードウェアを確認してください。

\begin{figure}[htbp]
\begin{center}
\includegraphics[mediaboxonly, height=4.5cm, clip]{funnel_server_launch_ja.pdf}
\vskip -\lastskip \vskip -3pt
\caption{Gainer I/Oモジュールに接続したFunnel Serverが正常に起動した時の画面例}
\label{default}
\end{center}
\end{figure}

\section{各ライブラリごとの準備と使用方法}

\subsection{ActionScript 3}
\texttt{libraries/actionscript3/src/funnel/}がライブラリのフォルダになりますので、それぞれの環境に合わせて設定して下さい。\texttt{libraries/actionscript3/src/}にGainerとArduino用のサンプルがあります。

\subsection{Processing}

\texttt{libraries/processing/library/}を\texttt{Processing/libraries/funnel/library/}としてコピーしてください。\texttt{libraries/processing/sketch\_samples/}にGainerとArduino用のサンプルがあります。

\subsection{Ruby}
\texttt{libraries/ruby/}にGainer、Arduino、XBee、Funnel I/O用のサンプルがあります。

\end{document}
